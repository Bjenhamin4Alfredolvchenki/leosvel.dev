---
import Layout from '../../layouts/BlogPostLayout.astro';
import BlogPost from '../../components/BlogPost.astro';

export function getStaticPaths() {
  const posts = Astro.fetchContent('../../data/blog-posts/*.md');

  return posts.map((post) => ({
    params: { slug: post.file.pathname.split('/').pop().split('.').shift() },
    props: { post },
  }));
}

const {
  Content,
  title,
  description,
  date,
  heroImage,
  heroImageAlt,
  thumbnailImage,
  thumbnailImageAlt,
} = Astro.props.post;
---

<Layout
  {title}
  {description}
  socialImage={thumbnailImage}
  socialImageAlt={thumbnailImageAlt}
>
  <BlogPost {title} {date} {heroImage} {heroImageAlt}>
    <Content />
  </BlogPost>
</Layout>
